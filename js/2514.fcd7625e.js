"use strict";(globalThis["webpackChunkFreeFromWeb"]=globalThis["webpackChunkFreeFromWeb"]||[]).push([[2514],{1784:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ae});var s=t(9835),i=t(1957),l=t(6970);const n={class:"profile-tabs"},o={class:"input"},u={class:"input"},r={class:"input"},d={class:"input"},m=["src"],p={class:"input"},b=["src"],c={class:"buttons"},h=["disabled"],g=["disabled"],f={class:"input"},w={class:"input"},y={class:"buttons"},v=["disabled"],P={class:"tab_json"},k=["onClick"],q={class:"tab_json"};function _(e,a,t,_,V,T){const N=(0,s.up)("PageHeader"),Z=(0,s.up)("q-tab"),D=(0,s.up)("q-tabs"),F=(0,s.up)("q-input"),W=(0,s.up)("q-form"),$=(0,s.up)("q-tab-panel"),U=(0,s.up)("json-viewer"),B=(0,s.up)("q-tab-panels"),I=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(I,{class:"profile"},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{"back-button":""}),(0,s._)("div",n,[(0,s.Wm)(D,{modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.activeTab=a),outline:"",align:"justify","indicator-color":"primary",breakpoint:0},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{name:"create",label:"Definition"}),(0,s.Wm)(Z,{name:"award",label:"Award"}),(0,s.Wm)(Z,{name:"query",label:"Profile Badge"})])),_:1},8,["modelValue"])]),(0,s.Wm)(B,{modelValue:e.activeTab,"onUpdate:modelValue":a[11]||(a[11]=a=>e.activeTab=a),class:"profile-tab-panels",animated:"",onTransition:e.transitionTab},{default:(0,s.w5)((()=>[(0,s.Wm)($,{name:"create",class:"no-padding"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"profile-settings",onSubmit:(0,i.iM)(e.publishPost,["stop"])},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(F,{modelValue:e.UniqueName,"onUpdate:modelValue":a[1]||(a[1]=a=>e.UniqueName=a),label:"Unique Name(d tag)",maxlength:"64",dense:""},null,8,["modelValue"])]),(0,s._)("div",u,[(0,s.Wm)(F,{modelValue:e.Name,"onUpdate:modelValue":a[2]||(a[2]=a=>e.Name=a),label:"Name(short name)",maxlength:"64",dense:""},null,8,["modelValue"])]),(0,s._)("div",r,[(0,s.Wm)(F,{modelValue:e.Description,"onUpdate:modelValue":a[3]||(a[3]=a=>e.Description=a),label:"Description",maxlength:"64",dense:""},null,8,["modelValue"])]),(0,s._)("div",d,[(0,s.Wm)(F,{modelValue:e.Image,"onUpdate:modelValue":a[4]||(a[4]=a=>e.Image=a),label:"Image(1024x1024)",dense:""},null,8,["modelValue"]),e.Image?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.Image,class:"picture-preview",loading:"lazy"},null,8,m)):(0,s.kq)("",!0)]),(0,s._)("div",p,[(0,s.Wm)(F,{modelValue:e.Thumb,"onUpdate:modelValue":a[5]||(a[5]=a=>e.Thumb=a),label:"Thumb(256x256)",dense:""},null,8,["modelValue"]),e.Thumb?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.Thumb,class:"picture-preview",loading:"lazy"},null,8,b)):(0,s.kq)("",!0)]),(0,s._)("div",c,[(0,s._)("button",{type:"submit",disabled:!e.changed,class:"btn btn-sm btn-primary"},(0,l.zw)(e.$t("Save")),9,h),(0,s._)("button",{class:"btn btn-sm",disabled:!e.changed,onClick:a[6]||(a[6]=(...a)=>e.setDataFromProfile&&e.setDataFromProfile(...a))},(0,l.zw)(e.$t("Reset")),9,g)])])),_:1},8,["onSubmit"])])),_:1}),(0,s.Wm)($,{name:"award",class:"no-padding"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{class:"profile-settings",onSubmit:(0,i.iM)(e.awardPost,["stop"])},{default:(0,s.w5)((()=>[(0,s._)("div",f,[(0,s.Wm)(F,{modelValue:e.dName,"onUpdate:modelValue":a[7]||(a[7]=a=>e.dName=a),label:"the unique name of the badge",maxlength:"64",dense:""},null,8,["modelValue"])]),(0,s._)("div",w,[(0,s.Wm)(F,{modelValue:e.npubs,"onUpdate:modelValue":a[8]||(a[8]=a=>e.npubs=a),label:"Npubs(One or more p tags referencing each pubkey awarded.)",maxlength:"640",dense:""},null,8,["modelValue"])]),(0,s._)("div",y,[(0,s._)("button",{type:"submit",disabled:!e.awardChanged,class:"btn btn-sm btn-primary"},(0,l.zw)(e.$t("Save")),9,v)])])),_:1},8,["onSubmit"])])),_:1}),(0,s.Wm)($,{name:"query",class:"no-padding"},{default:(0,s.w5)((()=>[(0,s._)("div",P,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.BadgeListNote,((t,l)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(U,{value:t,clickable:"",onClick:a[9]||(a[9]=(0,i.iM)((()=>{}),["stop"])),theme:"my-awesome-json-theme"},null,8,["value"]),(0,s._)("button",{class:"btn btn-sm",onClick:a=>e.Send(t)},"Post",8,k)])))),256))]),(0,s._)("div",q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.ProfileBadge,((e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(U,{value:e,clickable:"",onClick:a[10]||(a[10]=(0,i.iM)((()=>{}),["stop"])),theme:"my-awesome-json-theme"},null,8,["value"])])))),256))])])),_:1})])),_:1},8,["modelValue","onTransition"])])),_:1})}t(9665);var V=t(8803),T=t.n(V),N=t(9684),Z=t(8120),D=t(8354),F=t(2440),W=t(1842),$=t(597),U=t(764),B=t(5253),I=t(6245),x=t(3099),L=t(8039),C=t(4520),S=t(9944),Q=(t(7498),t(2296),t(1153)),j=t(5155);const A=(0,s.aZ)({name:"Profile",components:{PageHeader:N.Z,UserAvatar:Z.Z,UserName:D.Z,BaseIcon:B.Z,FollowButton:U.Z,Thread:W.Z,ListPlaceholder:$.Z,ListPost:F.Z,AsyncLoadLink:I.Z,JsonViewer:T()},mixins:[(0,S.Z)()],setup(){return{app:(0,x.q)(),nostr:(0,L.D)()}},data(){return{activeScreen:"create",activeTab:this.$route.params.tab||"create",loadingNotes:!0,loadingReactions:!0,raw:!1,UniqueName:"",Name:"",Description:"",Image:"",Thumb:"",dName:"",npubs:"",filters:{pubkey:(0,x.q)().myPubkey,kind:30009,tags:[],content:""},awardFilters:{pubkey:(0,x.q)().myPubkey,kind:8,tags:[],content:""},profileFilters:{authors:[(0,x.q)().myPubkey],kinds:[30008]},publishing:!1,BadgeListNote:[],ProfileBadge:[]}},computed:{pubkey(){return(0,C.FX)(this.$route.params.pubkey)},profile(){return this.nostr.getProfile(this.pubkey)},changed(){return this.UniqueName&&this.Name&&this.Description&&this.Image&&this.Thumb},awardChanged(){return this.dName&&this.npubs}},methods:{transitionTab(e,a){"query"==e&&this.getBadgeList()},setDataFromProfile(){this.UniqueName="",this.Name="",this.Description="",this.Image="",this.Thumb=""},async publishPost(){const e=this.filters;e.tags.push(["d",this.UniqueName]),e.tags.push(["name",this.Name]),e.tags.push(["description",this.Description]),e.tags.push(["image",this.Image,"1024x1024"]),e.tags.push(["thumb",this.Thumb,"256x256"]);const a=Q.Z.Badge(e).build();if(!await this.app.signEvent(a))return;const t=await this.nostr.publish(a);if(t){this.setDataFromProfile();const e="Post";this.$q.notify({message:(0,j.$t)(`${e} published to `+t+" relays",{numRelays:t}),color:"positive"})}else this.$q.notify({message:"Failed to publish post",color:"negative"})},setAwardDataFromProfile(){this.dName="",this.npubs=""},async awardPost(){const e=this.awardFilters;var a="30009:"+(0,x.q)().myPubkey+":"+this.dName;e.tags.push(["a",a]);for(var t=this.npubs,s=t.split(","),i=0;i<s.length;i++)s[i]=s[i].replace(/^\s*/,"").replace(/\s*$/,""),e.tags.push(["p",s[i],"wss://nostr-pub.wellorder.net"]);const l=Q.Z.Award(e).build();if(!await this.app.signEvent(l))return;const n=await this.nostr.publish(l);if(n){this.setAwardDataFromProfile();const e="Post";this.$q.notify({message:(0,j.$t)(`${e} published to `+n+" relays",{numRelays:n}),color:"positive"})}else this.$q.notify({message:"Failed to publish post",color:"negative"})},async Send(e){const a={pubkey:(0,x.q)().myPubkey,kind:30008,content:"",tags:[]};a.tags.push(["d","profile_badges"]),a.tags.push(["a",e.tags[0][1]]),a.tags.push(["e",e.id]);const t=Q.Z.ProfileBadge(a).build();if(!await this.app.signEvent(t))return;const s=await this.nostr.publish(t);if(s){this.setDataFromProfile();const e="Post";this.$q.notify({message:(0,j.$t)(`${e} published to `+s+" relays",{numRelays:s}),color:"positive"}),this.getProfile()}else this.$q.notify({message:"Failed to publish post",color:"negative"})},async getProfile(){this.ProfileBadge=[];const e=await this.nostr.fetch(this.profileFilters,{subId:""});this.ProfileBadge=e},async getBadgeList(){const e={kinds:[8],"#p":[(0,x.q)().myPubkey]},a=await this.nostr.fetch(e,{subId:""});this.BadgeListNote=a,this.stream=this.nostr.stream(e,{subId:""}),this.stream.on("update",(e=>{this.getBadgeList()}))}},watch:{activeTab(){this.$router.replace({params:{tab:this.activeTab}})}},mounted(){},unmounted(){}});var z=t(1639),R=t(9885),H=t(2230),M=t(900),E=t(4016),K=t(4106),Y=t(8326),J=t(9687),O=t(8149),X=t(9984),G=t.n(X);const ee=(0,z.Z)(A,[["render",_],["__scopeId","data-v-203cdce8"]]),ae=ee;G()(A,"components",{QPage:R.Z,QTabs:H.Z,QTab:M.Z,QTabPanels:E.Z,QTabPanel:K.Z,QForm:Y.Z,QInput:J.Z,QField:O.Z})}}]);