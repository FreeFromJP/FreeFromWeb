"use strict";(globalThis["webpackChunkFreeFromWeb"]=globalThis["webpackChunkFreeFromWeb"]||[]).push([[4431],{9944:(e,t,o)=>{function s(e=100){return{data(){return{displayPriority:0}},mounted(){this.runDisplayPriority()},methods:{runDisplayPriority(){const t=()=>{requestAnimationFrame((()=>{this.displayPriority++,this.displayPriority<e&&t()}))};t()},defer(e){return this.displayPriority>=e}}}}o.d(t,{Z:()=>s})},6401:(e,t,o)=>{o.d(t,{Z:()=>m});var s=o(9835),a=o(6970);const n={key:0,class:"list-placeholder"},r={key:1};function l(e,t,o,l,i,u){const d=(0,s.up)("q-spinner");return o.count?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",n,[o.loading?((0,s.wg)(),(0,s.j4)(d,{key:0,size:"sm"})):((0,s.wg)(),(0,s.iD)("p",r,(0,a.zw)(e.$t(o.label)),1))]))}const i={name:"ListPlaceholder",props:{count:{type:Number,default:0},loading:{type:Boolean,default:!1},label:{type:String,default:"Nothing here."}}};var u=o(1639),d=o(3940),c=o(9984),p=o.n(c);const h=(0,u.Z)(i,[["render",l],["__scopeId","data-v-fdc49960"]]),m=h;p()(i,"components",{QSpinner:d.Z})},9010:(e,t,o)=>{o.d(t,{Z:()=>p});var s=o(9835),a=o(6970);const n={key:0},r={class:"addon"};function l(e,t,o,l,i,u){const d=(0,s.up)("base-icon");return(0,s.wg)(),(0,s.iD)("div",{class:(0,a.C_)(["page-header",{dense:e.dense}])},[e.backButton?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"back-button",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},[(0,s.Wm)(d,{icon:"back"})])):(0,s.kq)("",!0),(0,s._)("div",{class:(0,a.C_)({"profile-info":!!e.subline})},[(0,s.WI)(e.$slots,"default",{},(()=>[(0,s._)("h2",null,(0,a.zw)(e.$t(e.title||e.titleFromRoute()||"Home")),1),e.subline?((0,s.wg)(),(0,s.iD)("span",n,(0,a.zw)(e.subline),1)):(0,s.kq)("",!0)]))],2),(0,s._)("div",r,[(0,s.WI)(e.$slots,"addon")])],2)}var i=o(7664);const u=(0,s.aZ)({name:"PageHeader",components:{BaseIcon:i.Z},props:{title:{type:String,default:void 0},subline:{type:String,default:void 0},backButton:{type:Boolean,default:!1},logo:{type:Boolean,default:!1},dense:{type:Boolean,default:!1}},methods:{titleFromRoute(){const e=this.$route.name?.toLowerCase();return e?.charAt(0).toUpperCase()+e?.substring(1)}}});var d=o(1639);const c=(0,d.Z)(u,[["render",l]]),p=c},2141:(e,t,o)=>{o.d(t,{Z:()=>d});var s=o(9835);const a={class:"thread"};function n(e,t,o,n,r,l){const i=(0,s.up)("ListPost");return(0,s.wg)(),(0,s.iD)("div",a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filteredThread,((e,t)=>((0,s.wg)(),(0,s.j4)(i,{key:e.id,note:e,"connector-top":l.filteredThread.length>1&&t>0,"connector-bottom":l.filteredThread.length>1&&t<l.filteredThread.length-1||o.forceBottomConnector,actions:"",clickable:"",raw:o.raw},null,8,["note","connector-top","connector-bottom","raw"])))),128))])}var r=o(1459);const l={name:"Thread",components:{ListPost:r.Z},props:{thread:{type:Array,required:!0},forceBottomConnector:{type:Boolean,default:!1},raw:Boolean},setup(e){(0,s.YP)((()=>e.raw),(e=>{}))},computed:{filteredThread(){return this.thread.filter((e=>!!e))}}};var i=o(1639);const u=(0,i.Z)(l,[["render",n],["__scopeId","data-v-44d236ba"]]),d=u},4431:(e,t,o)=>{o.r(t),o.d(t,{default:()=>X});var s=o(9835),a=o(6970),n=o(1957);const r=e=>((0,s.dD)("data-v-0ad4aabb"),e=e(),(0,s.Cn)(),e),l={class:"profile-header"},i={class:"profile-header-content"},u={class:"username"},d={class:"about"},c={class:"followers"},p={class:"actions"},h={class:"profile-tabs"},m={class:"kind-checkbox ListRawbox"},b={class:"kind-checkbox-item ListRaw"},g=r((()=>(0,s._)("text",{class:"kind-checkbox-text"}," RAW ",-1)));function w(e,t,o,r,w,y){const f=(0,s.up)("PageHeader"),k=(0,s.up)("UserAvatar"),v=(0,s.up)("UserName"),_=(0,s.up)("FollowButton"),T=(0,s.up)("BaseIcon"),Z=(0,s.up)("q-tooltip"),P=(0,s.up)("q-icon"),W=(0,s.up)("q-tab"),$=(0,s.up)("q-tabs"),q=(0,s.up)("q-btn"),C=(0,s.up)("ListPost"),B=(0,s.up)("AsyncLoadLink"),F=(0,s.up)("q-tab-panel"),D=(0,s.up)("Thread"),R=(0,s.up)("ListPlaceholder"),L=(0,s.up)("q-tab-panels"),z=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(z,{class:"profile"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{"back-button":""}),(0,s._)("div",l,[(0,s.Wm)(k,{pubkey:e.pubkey,class:"profile-header-avatar"},null,8,["pubkey"]),(0,s._)("div",i,[(0,s._)("p",u,[(0,s.Wm)(v,{pubkey:e.pubkey,"two-line":"",header:"","show-verified":""},null,8,["pubkey"]),(0,s.Wm)(_,{pubkey:e.pubkey},null,8,["pubkey"])]),(0,s._)("p",d,(0,a.zw)(e.profile?.about),1),(0,s._)("p",c,[(0,s._)("a",{onClick:t[0]||(t[0]=t=>e.goToFollowers("following"))},[(0,s._)("strong",null,(0,a.zw)(e.contacts?.length||0),1),(0,s.Uk)(" "+(0,a.zw)(e.$t("Following")),1)]),(0,s._)("a",{onClick:t[1]||(t[1]=t=>e.goToFollowers("followers"))},[(0,s._)("strong",null,(0,a.zw)(e.followers?.length?`${e.followers?.length}+`:0),1),(0,s.Uk)(" "+(0,a.zw)(e.$t("Followers")),1)])]),(0,s._)("p",p,[(0,s._)("a",{onClick:t[2]||(t[2]=(...t)=>e.goToConversation&&e.goToConversation(...t))},[(0,s.Wm)(T,{icon:"messages"}),(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("Send private message")),1)])),_:1})]),(0,s._)("a",{onClick:t[3]||(t[3]=t=>e.copyUserId(e.pubkey))},[(0,s.Wm)(P,{name:"content_copy",size:"sm"}),(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.$t("Copy UserID")),1)])),_:1})])])])]),(0,s._)("div",h,[(0,s.Wm)($,{modelValue:e.activeTab,"onUpdate:modelValue":t[4]||(t[4]=t=>e.activeTab=t),outline:"",align:"justify","indicator-color":"primary",breakpoint:0},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{name:"posts",label:e.$t("Posts")},null,8,["label"]),(0,s.Wm)(W,{name:"replies",label:e.$t("Replies")},null,8,["label"]),(0,s.Wm)(W,{name:"reactions",label:e.$t("Reactions")},null,8,["label"]),(0,s.Wm)(W,{name:"relays",label:e.$t("Relays")},null,8,["label"])])),_:1},8,["modelValue"])]),(0,s._)("div",m,[(0,s._)("div",b,[e.raw?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(q,{key:0,color:"primary",round:"",outline:"",size:"xs",onClick:t[5]||(t[5]=(0,n.iM)((t=>e.ToggleRaw()),["stop"])),class:"kind-checkbox-btn"})),e.raw?((0,s.wg)(),(0,s.j4)(q,{key:1,color:"primary",round:"",size:"xs",onClick:t[6]||(t[6]=(0,n.iM)((t=>e.ToggleRaw()),["stop"])),icon:"done"})):(0,s.kq)("",!0),g])]),(0,s.Wm)(L,{modelValue:e.activeTab,"onUpdate:modelValue":t[7]||(t[7]=t=>e.activeTab=t),class:"profile-tab-panels",animated:""},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{name:"posts",class:"no-padding"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.posts,((t,o)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[e.defer(o)?((0,s.wg)(),(0,s.j4)(C,{key:t.id,note:t,clickable:"",actions:"",raw:e.raw},null,8,["note","raw"])):(0,s.kq)("",!0)],64)))),256)),(0,s.Wm)(B,{"load-fn":e.loadMorePosts,"has-items":!!e.posts?.length},null,8,["load-fn","has-items"])])),_:1}),(0,s.Wm)(F,{name:"replies",class:"no-padding"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.replies,((t,o)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[e.defer(o)?((0,s.wg)(),(0,s.j4)(D,{key:t[1].id,thread:t,raw:e.raw},null,8,["thread","raw"])):(0,s.kq)("",!0)],64)))),256)),(0,s.Wm)(B,{"load-fn":e.loadMorePosts,"has-items":!!e.replies?.length},null,8,["load-fn","has-items"])])),_:1}),(0,s.Wm)(F,{name:"reactions",class:"no-padding"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.reactions,((t,o)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[e.defer(o)?((0,s.wg)(),(0,s.j4)(D,{key:t[1].id,thread:t,raw:e.raw},null,8,["thread","raw"])):(0,s.kq)("",!0)],64)))),256)),(0,s.Wm)(B,{"load-fn":e.loadMoreReactions,"has-items":!!e.reactions?.length},null,8,["load-fn","has-items"])])),_:1}),(0,s.Wm)(F,{name:"relays",class:"no-padding"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,{count:0})])),_:1})])),_:1},8,["modelValue"])])),_:1})}o(9665);var y=o(9010),f=o(5501),k=o(9715),v=o(1459),_=o(2141),T=o(6401),Z=o(7328),P=o(7664);const W={key:1};function $(e,t,o,n,r,l){const i=(0,s.up)("q-spinner");return(0,s.wg)(),(0,s.iD)("div",{ref:"link",class:"async-load-link",onClick:t[0]||(t[0]=(...t)=>e.load&&e.load(...t))},[e.loading?((0,s.wg)(),(0,s.j4)(i,{key:0,size:"sm"})):((0,s.wg)(),(0,s.iD)("span",W,[(0,s.Uk)((0,a.zw)(e.$t(e.noMore?e.prefixNoMore:e.hasItems?"":e.prefix))+" ",1),(0,s._)("a",null,(0,a.zw)(e.$t(e.noMore?e.labelNoMore:e.label)),1)]))],512)}const q=(0,s.aZ)({name:"AsyncLoadLink",emits:["loading","loaded"],props:{loadFn:{type:Function,required:!0},label:{type:String,default:"Load more"},labelNoMore:{type:String,default:"Try again?"},prefix:{type:String,default:"Nothing here."},prefixNoMore:{type:String,default:"Nothing found."},hasItems:{type:Boolean,default:!1},autoload:{type:Boolean,default:!1}},data(){return{loading:!1,noMore:!1,observer:null}},methods:{async load(){if(this.loading)return;this.loading=!0,this.$emit("loading");const e=await this.loadFn();this.noMore=!e||!e.length,this.loading=!1,this.$emit("loaded",e)}},mounted(){this.autoload&&(this.observer=new IntersectionObserver(this.load.bind(this),{root:null,threshold:.5}),this.observer.observe(this.$refs.button))},unmounted(){this.observer&&this.observer.disconnect()}});var C=o(1639),B=o(3940),F=o(9984),D=o.n(F);const R=(0,C.Z)(q,[["render",$],["__scopeId","data-v-92dd1492"]]),L=R;D()(q,"components",{QSpinner:B.Z});var z=o(3099),I=o(6166),A=o(4520),N=o(9944),x=o(7498),M=o(2296);const S=(0,s.aZ)({name:"Profile",components:{PageHeader:y.Z,UserAvatar:f.Z,UserName:k.Z,BaseIcon:P.Z,FollowButton:Z.Z,Thread:_.Z,ListPlaceholder:T.Z,ListPost:v.Z,AsyncLoadLink:L},mixins:[(0,N.Z)()],setup(){return{app:(0,z.q)(),nostr:(0,I.D)()}},data(){return{activeScreen:"posts",activeTab:this.$route.params.tab||"posts",loadingNotes:!0,loadingReactions:!0,raw:!1}},computed:{pubkey(){return(0,A.FX)(this.$route.params.pubkey)},profile(){return this.nostr.getProfile(this.pubkey)},notes(){return this.nostr.getPostsByAuthor(this.pubkey)},posts(){return console.log("this.notes---------------",this.notes),this.notes?.filter((e=>!e.hasAncestor()))},replies(){return this.notes?.filter((e=>e.hasAncestor())).map((e=>[this.nostr.getNote(e.ancestor()),e])).slice(0,50)},reactions(){return this.nostr.getReactionsByAuthor(this.pubkey).map((e=>[this.nostr.getNote(e.ancestor()),e])).slice(0,50)},relays(){return[]},contacts(){return this.nostr.getContacts(this.pubkey)},followers(){return this.nostr.getFollowers(this.pubkey)},lightningLink(){const e=this.profile?.lud06||this.profile?.lud16;return e?`lightning:${e}`:null}},methods:{ToggleRaw(){this.raw=!this.raw},loadMorePosts(){const e=this.notes?.[this.notes.length-1]?.created_at||M.Z.now();return this.nostr.fetch({kinds:[x.nS.NOTE],authors:[this.pubkey],until:e,limit:100})},loadMoreReactions(){const e=this.reactions?.[this.reactions.length-1]?.created_at||M.Z.now();return this.nostr.fetch({kinds:[x.nS.REACTION],authors:[this.pubkey],until:e,limit:100})},goToFollowers(e="following"){this.$router.push({name:"followers",params:{pubkey:(0,A.jm)(this.pubkey,"npub"),tab:e}})},goToConversation(){this.$router.push({name:"conversation",params:{pubkey:(0,A.jm)(this.pubkey,"npub")}})},async copyUserId(e){const t=(0,A.jm)(this.pubkey,"npub");await navigator.clipboard.writeText(t).then((()=>{this.$q.notify({message:"Replication Success",color:"positive",timeout:1e3,position:"top"})}))}},watch:{activeTab(){this.$router.replace({params:{tab:this.activeTab}})}},mounted(){this.nostr.fetchPostsByAuthor(this.pubkey,50).then((()=>this.loadingNotes=!1)),this.nostr.fetchReactionsByAuthor(this.pubkey,50).then((()=>this.loadingReactions=!1)),this.nostr.fetchFollowers(this.pubkey,1e3),this.stream=this.nostr.streamFullProfile(this.pubkey)},unmounted(){this.stream&&this.nostr.cancelStream(this.stream)}});var U=o(9885),j=o(6858),H=o(2857),Q=o(2230),Y=o(900),V=o(8879),K=o(4016),O=o(4106);const E=(0,C.Z)(S,[["render",w],["__scopeId","data-v-0ad4aabb"]]),X=E;D()(S,"components",{QPage:U.Z,QTooltip:j.Z,QIcon:H.Z,QTabs:Q.Z,QTab:Y.Z,QBtn:V.Z,QTabPanels:K.Z,QTabPanel:O.Z})}}]);