"use strict";(globalThis["webpackChunkFreeFromWeb"]=globalThis["webpackChunkFreeFromWeb"]||[]).push([[8063],{1320:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var o=s(9835),a=s(6970),l=s(1957);const n=e=>((0,o.dD)("data-v-46e2b442"),e=e(),(0,o.Cn)(),e),i={class:"profile-header"},r={class:"profile-header-content"},u={class:"username"},c={class:"about"},p={class:"followers"},h={class:"actions"},d={class:"profile-tabs"},m={class:"kind-checkbox ListRawbox"},b={class:"kind-checkbox-item ListRaw"},w=n((()=>(0,o._)("text",{class:"kind-checkbox-text"}," RAW ",-1)));function k(e,t,s,n,k,g){const y=(0,o.up)("PageHeader"),f=(0,o.up)("UserAvatar"),_=(0,o.up)("UserName"),v=(0,o.up)("FollowButton"),T=(0,o.up)("BaseIcon"),W=(0,o.up)("q-tooltip"),Z=(0,o.up)("q-icon"),P=(0,o.up)("q-tab"),R=(0,o.up)("q-tabs"),$=(0,o.up)("q-btn"),q=(0,o.up)("ListPost"),C=(0,o.up)("AsyncLoadLink"),F=(0,o.up)("q-tab-panel"),U=(0,o.up)("Thread"),A=(0,o.up)("ListPlaceholder"),x=(0,o.up)("q-tab-panels"),L=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(L,{class:"profile"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{"back-button":""}),(0,o._)("div",i,[(0,o.Wm)(f,{pubkey:e.pubkey,class:"profile-header-avatar"},null,8,["pubkey"]),(0,o._)("div",r,[(0,o._)("p",u,[(0,o.Wm)(_,{pubkey:e.pubkey,"two-line":"",header:"","show-verified":""},null,8,["pubkey"]),(0,o.Wm)(v,{pubkey:e.pubkey},null,8,["pubkey"])]),(0,o._)("p",c,(0,a.zw)(e.profile?.about),1),(0,o._)("p",p,[(0,o._)("a",{onClick:t[0]||(t[0]=t=>e.goToFollowers("following"))},[(0,o._)("strong",null,(0,a.zw)(e.contacts?.length||0),1),(0,o.Uk)(" "+(0,a.zw)(e.$t("Following")),1)]),(0,o._)("a",{onClick:t[1]||(t[1]=t=>e.goToFollowers("followers"))},[(0,o._)("strong",null,(0,a.zw)(e.followers?.length?`${e.followers?.length}+`:0),1),(0,o.Uk)(" "+(0,a.zw)(e.$t("Followers")),1)])]),(0,o._)("p",h,[(0,o._)("a",{onClick:t[2]||(t[2]=(...t)=>e.goToConversation&&e.goToConversation(...t))},[(0,o.Wm)(T,{icon:"messages"}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("Send private message")),1)])),_:1})]),(0,o._)("a",{onClick:t[3]||(t[3]=t=>e.copyUserId(e.pubkey))},[(0,o.Wm)(Z,{name:"content_copy",size:"sm"}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("Copy UserID")),1)])),_:1})])])])]),(0,o._)("div",d,[(0,o.Wm)(R,{modelValue:e.activeTab,"onUpdate:modelValue":t[4]||(t[4]=t=>e.activeTab=t),outline:"",align:"justify","indicator-color":"primary",breakpoint:0},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{name:"posts",label:e.$t("Posts")},null,8,["label"]),(0,o.Wm)(P,{name:"replies",label:e.$t("Replies")},null,8,["label"]),(0,o.Wm)(P,{name:"reactions",label:e.$t("Reactions")},null,8,["label"]),(0,o.Wm)(P,{name:"relays",label:e.$t("Relays")},null,8,["label"])])),_:1},8,["modelValue"])]),(0,o._)("div",m,[(0,o._)("div",b,[e.raw?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)($,{key:0,color:"primary",round:"",outline:"",size:"xs",onClick:t[5]||(t[5]=(0,l.iM)((t=>e.ToggleRaw()),["stop"])),class:"kind-checkbox-btn"})),e.raw?((0,o.wg)(),(0,o.j4)($,{key:1,color:"primary",round:"",size:"xs",onClick:t[6]||(t[6]=(0,l.iM)((t=>e.ToggleRaw()),["stop"])),icon:"done"})):(0,o.kq)("",!0),w])]),(0,o.Wm)(x,{modelValue:e.activeTab,"onUpdate:modelValue":t[7]||(t[7]=t=>e.activeTab=t),class:"profile-tab-panels",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{name:"posts",class:"no-padding"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.posts,((t,s)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[e.defer(s)?((0,o.wg)(),(0,o.j4)(q,{key:t.id,note:t,clickable:"",actions:"",raw:e.raw},null,8,["note","raw"])):(0,o.kq)("",!0)],64)))),256)),(0,o.Wm)(C,{"load-fn":e.loadMorePosts,"has-items":!!e.posts?.length},null,8,["load-fn","has-items"])])),_:1}),(0,o.Wm)(F,{name:"replies",class:"no-padding"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.replies,((t,s)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[e.defer(s)?((0,o.wg)(),(0,o.j4)(U,{key:t[1].id,thread:t,raw:e.raw},null,8,["thread","raw"])):(0,o.kq)("",!0)],64)))),256)),(0,o.Wm)(C,{"load-fn":e.loadMorePosts,"has-items":!!e.replies?.length},null,8,["load-fn","has-items"])])),_:1}),(0,o.Wm)(F,{name:"reactions",class:"no-padding"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.reactions,((t,s)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[e.defer(s)?((0,o.wg)(),(0,o.j4)(U,{key:t[1].id,thread:t,raw:e.raw},null,8,["thread","raw"])):(0,o.kq)("",!0)],64)))),256)),(0,o.Wm)(C,{"load-fn":e.loadMoreReactions,"has-items":!!e.reactions?.length},null,8,["load-fn","has-items"])])),_:1}),(0,o.Wm)(F,{name:"relays",class:"no-padding"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{count:0})])),_:1})])),_:1},8,["modelValue"])])),_:1})}s(9665);var g=s(4586),y=s(5501),f=s(9715),_=s(8297),v=s(2141),T=s(6401),W=s(7328),Z=s(7664),P=s(3025),R=s(3099),$=s(8039),q=s(4520),C=s(9944),F=s(7498),U=s(2296);const A=(0,o.aZ)({name:"Profile",components:{PageHeader:g.Z,UserAvatar:y.Z,UserName:f.Z,BaseIcon:Z.Z,FollowButton:W.Z,Thread:v.Z,ListPlaceholder:T.Z,ListPost:_.Z,AsyncLoadLink:P.Z},mixins:[(0,C.Z)()],setup(){return{app:(0,R.q)(),nostr:(0,$.D)()}},data(){return{activeScreen:"posts",activeTab:this.$route.params.tab||"posts",loadingNotes:!0,loadingReactions:!0,raw:!1}},computed:{pubkey(){const e=this.$route.params.pubkey;return e&&e.startsWith("npub")?(0,q.FX)(e):e},profile(){return this.nostr.getProfile(this.pubkey)},notes(){return this.nostr.getPostsByAuthor(this.pubkey)},posts(){return this.notes?.filter((e=>!e.hasAncestor()))},replies(){return this.notes?.filter((e=>e.hasAncestor())).map((e=>[this.nostr.getNote(e.ancestor()),e])).slice(0,50)},reactions(){return this.nostr.getReactionsByAuthor(this.pubkey).map((e=>[this.nostr.getNote(e.ancestor()),e])).slice(0,50)},relays(){return[]},contacts(){return this.nostr.getContacts(this.pubkey)},followers(){return this.nostr.getFollowers(this.pubkey)},lightningLink(){const e=this.profile?.lud06||this.profile?.lud16;return e?`lightning:${e}`:null}},methods:{ToggleRaw(){this.raw=!this.raw},loadMorePosts(){const e=this.notes?.[this.notes.length-1]?.created_at||U.Z.now();return this.nostr.fetch({kinds:[F.nS.NOTE],authors:[this.pubkey],until:e,limit:100})},loadMoreReactions(){const e=this.reactions?.[this.reactions.length-1]?.created_at||U.Z.now();return this.nostr.fetch({kinds:[F.nS.REACTION],authors:[this.pubkey],until:e,limit:100})},goToFollowers(e="following"){this.$router.push({name:"followers",params:{pubkey:(0,q.jm)(this.pubkey,"npub"),tab:e}})},goToConversation(){this.$router.push({name:"conversation",params:{pubkey:(0,q.jm)(this.pubkey,"npub")}})},async copyUserId(e){const t=(0,q.jm)(this.pubkey,"npub");await navigator.clipboard.writeText(t).then((()=>{this.$q.notify({message:"Replication Success",color:"positive",timeout:1e3,position:"top"})}))}},watch:{activeTab(){this.$router.replace({params:{tab:this.activeTab}})}},mounted(){this.nostr.fetchPostsByAuthor(this.pubkey,50).then((()=>this.loadingNotes=!1)),this.nostr.fetchReactionsByAuthor(this.pubkey,50).then((()=>this.loadingReactions=!1)),this.nostr.fetchFollowers(this.pubkey,1e3),this.stream=this.nostr.streamFullProfile(this.pubkey)},unmounted(){this.stream&&this.nostr.cancelStream(this.stream)}});var x=s(1639),L=s(9885),j=s(6858),z=s(2857),B=s(2230),D=s(900),H=s(8879),I=s(4016),N=s(4106),Q=s(9984),M=s.n(Q);const S=(0,x.Z)(A,[["render",k],["__scopeId","data-v-46e2b442"]]),V=S;M()(A,"components",{QPage:L.Z,QTooltip:j.Z,QIcon:z.Z,QTabs:B.Z,QTab:D.Z,QBtn:H.Z,QTabPanels:I.Z,QTabPanel:N.Z})}}]);